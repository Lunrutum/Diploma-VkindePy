# Diploma-VkindePy
BotVk for search your half

------В файл setting добавить свои данные по токенам пользователя и группы.
------Поменять название Db можно в файле  'Db_create.py'     (engine = sq.create_engine('postgresql://postgres:***@localhost:5432/name', client_encoding='utf8') , где *** вставить свой пароль, где name - Название Бд.

Инструкция по использованию чат-бота VKinder:

+ Для начала работы с ботом необходимо начать диалог с сообществом

+ После написать команду Начать

 +Пройти регистрацию написать 'Да', после того как появится текстовое меню.  Функция ( reg_new_user -зарегистрирует , а check_register проверит были ли зарегистрированы)

+Дальше можно начинать поиск
    Если указан город, пол , возраст. ( функция get_user соберет данные с вашей страницы и произведет по ней поиск. )
    Если нет, то основная логика бота спросит эти данные с вас и сохранит в переменные для поиск.

+После сбора данных логика активирует функцию find_user и примет переменные  пол возраст от и до ( указаны значения +-3 от вычисления вашего возраста), город. (Количество пользователей в поиске = 200 + наличие фото .)

+Дальше создается json файл и все сохраняется туда в виде кортежа. (json_create)

+Далее, все кого мы нашли, с помощью функции (check_db_user), проверим есть ли они в Черном списке или в Избранном по vk_id
и запросим фото с помощью (get_photo) отсортируем по лайкам sort_likes

+После программа предложит добавить в избранное или в черный список , либо выйти....... функции (add_to_bl, add_user_fav, add_user_photos) помогут нам все сохранить в таблицу Бд, которую мы создали при запуске программы

=====В Бд находится 4 таблицы Favorites Blacklist VkUsers Photo/ все связаны по Vk_id к users/====

После сохранения можем продолжить поиск или перезагрузив бот, с помощью команды 'начать', выйти в избранное или Черный список( to_favorites или to_bl)

В списках мы сможем посмотреть или удалить Анкеты ( delete_db_blacklist, delete_db_favorites, delete_db_photo)


====Бот слушает сообщения через (loop_bot) принимая наши сообщения и реагирует с помощью ( write_msg )====
----При запуске мейн чистим Бд и создаем таблицы ( Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine) ) -----
